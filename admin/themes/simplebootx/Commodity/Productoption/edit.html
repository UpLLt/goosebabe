<admintpl file="header"/>
</head>
<body>
<div class="wrap js-check-wrap">
    <ul class="nav nav-tabs">
        <li><a href="{:U('Productoption/lists')}" target="_self">选项</a></li>
        <li class="active"><a href="javascript:;">编辑选项</a></li>
    </ul>
    <form class="form-horizontal js-ajax-form" action="{:U('Productoption/edit_post')}" method="post">
        <div class="tabbable">
            <div class="tab-content">
                <div class="control-group">
                    <label class="control-label">选项名称</label>
                    <div class="controls">
                        <input type="text" name="option[name]" value="{$data.name}">
                        <span class="form-required">*</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">类型</label>
                    <div class="controls">
                        <select name="option[type]">
                            {$option_list}
                        </select>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">排序</label>
                    <div class="controls">
                        <input type="text" name="option[sort_order]" value="{$data.sort_order}">
                        <span class="form-required">*</span>
                    </div>
                </div>
            </div>
        </div>

        <table style="margin-top: 10px;word-break:break-all;" class="table table-hover table-bordered table-list"
               id="menus-table">
            <thead>
            <tr>
                <th>选项值</th>
                <th>排序</th>
                <th></th>
            </tr>
            </thead>
            <tbody id="trlist">
            {$tablebody}
            </tbody>
            <tr>
                <td colspan="2"></td>
                <td>
                    <a id="add_upload_tr" class="btn btn-info">+</a>
                </td>
            </tr>

        </table>

        <div class="hidden">
            <input type="hidden" name="option[option_id]" value="{$data.option_id}">
        </div>
        <div class="form-actions">
            <button class="btn btn-primary js-ajax-submit" type="submit">{:L('EDIT')}</button>
            <a class="btn" href="{:U('Productoption/lists')}">{:L('BACK')}</a>
        </div>
    </form>
</div>
<script type="text/javascript" src="__PUBLIC__/js/common.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/content_addtop.js"></script>
<script>
    $(function () {
        var option_value_row = '{$option_value_row}';

        $('#add_upload_tr').click(function (e) {
            $('#trlist').append('<tr>' +
                    '<td><input type="hidden" name="option_value[' + option_value_row + '][name]"><input required name="option_value[' + option_value_row + '][name]" value=""></td>' +
                    '<td><input required name="option_value[' + option_value_row + '][sort_order]" value=""></td>' +
                    '<td><a class="btn btn-danger btn-small" href="javascript:;" onclick="deletetr(this)"><span>删除</span></a></td>' +
                    '</tr>');
            option_value_row = parseInt(option_value_row) + 1;
        });

    });

    function deletetr(e) {
        $(e).parent().parent().remove();
    }
</script>
</body>
</html>